- name: grab facts for found instance node
  ec2_instance_info:
    region: "{{ ec2_region }}"
    filters:
      instance-state-name: running
      "tag:Name": "{{item}}"
  register: instance_info

- name: these are marked for deletion
  debug:
    msg:
      - "entry: {{item}} does not exist in AWS region {{ec2_region}}"
      - "please delete record entry {{item.split('-')[1] + '.' + item.split('-')[0] + '.' + workshop_dns_zone}}"
  when: instance_info["instances"] | length == 0

- set_fact:
    delete_these_entries:  "{{delete_these_entries + [ item.split('-')[1] + '.' + item.split('-')[0] + '.' + workshop_dns_zone ] }}"
  when: instance_info["instances"] | length == 0
